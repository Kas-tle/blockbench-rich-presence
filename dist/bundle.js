!function(e){var t={};function r(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=43)}([function(e,t){e.exports=require("stream")},function(e,t){e.exports=require("zlib")},function(e,t,r){"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},function(e,t){e.exports=require("events")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("url")},function(e,t,r){"use strict";const{EMPTY_BUFFER:s}=r(2);function n(e,t){if(0===e.length)return s;if(1===e.length)return e[0];const r=Buffer.allocUnsafe(t);let n=0;for(let t=0;t<e.length;t++){const s=e[t];s.copy(r,n),n+=s.length}return r}function o(e,t,r,s,n){for(let o=0;o<n;o++)r[s+o]=e[o]^t[3&o]}function i(e,t){const r=e.length;for(let s=0;s<r;s++)e[s]^=t[3&s]}function a(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function c(e){if(c.readOnly=!0,Buffer.isBuffer(e))return e;let t;return e instanceof ArrayBuffer?t=Buffer.from(e):ArrayBuffer.isView(e)?t=function(e){const t=Buffer.from(e.buffer);if(e.byteLength!==e.buffer.byteLength)return t.slice(e.byteOffset,e.byteOffset+e.byteLength);return t}(e):(t=Buffer.from(e),c.readOnly=!1),t}try{const t=r(29),s=t.BufferUtil||t;e.exports={concat:n,mask(e,t,r,n,i){i<48?o(e,t,r,n,i):s.mask(e,t,r,n,i)},toArrayBuffer:a,toBuffer:c,unmask(e,t){e.length<32?i(e,t):s.unmask(e,t)}}}catch(t){e.exports={concat:n,mask:o,toArrayBuffer:a,toBuffer:c,unmask:i}}},function(e,t,r){"use strict";const s=r(30),n=r(1),o=r(6),{kStatusCode:i,NOOP:a}=r(2),c=Buffer.from([0,0,255,255]),l=Buffer.from([0]),u=Symbol("permessage-deflate"),h=Symbol("total-length"),d=Symbol("callback"),f=Symbol("buffers"),p=Symbol("error");let _;function m(e){this[f].push(e),this[h]+=e.length}function E(e){this[h]+=e.length,this[u]._maxPayload<1||this[h]<=this[u]._maxPayload?this[f].push(e):(this[p]=new RangeError("Max payload size exceeded"),this[p][i]=1009,this.removeListener("data",E),this.reset())}function y(e){this[u]._inflate=null,e[i]=1007,this[d](e)}e.exports=class{constructor(e,t,r){if(this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!_){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;_=new s({concurrency:e})}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate&&(this._deflate[d]&&this._deflate[d](),this._deflate.close(),this._deflate=null)}acceptAsServer(e){const t=this._options,r=e.find(e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{let r=e[t];if(r.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}e[t]=r})}),e}decompress(e,t,r){_.push(s=>{this._decompress(e,t,(e,t)=>{s(),r(e,t)})})}compress(e,t,r){_.push(s=>{this._compress(e,t,(e,t)=>{s(),(e||t)&&r(e,t)})})}_decompress(e,t,r){const s=this._isServer?"client":"server";if(!this._inflate){const e=`${s}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=n.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[u]=this,this._inflate[h]=0,this._inflate[f]=[],this._inflate.on("error",y),this._inflate.on("data",E)}this._inflate[d]=r,this._inflate.write(e),t&&this._inflate.write(c),this._inflate.flush(()=>{const e=this._inflate[p];if(e)return this._inflate.close(),this._inflate=null,void r(e);const n=o.concat(this._inflate[f],this._inflate[h]);t&&this.params[`${s}_no_context_takeover`]?(this._inflate.close(),this._inflate=null):(this._inflate[h]=0,this._inflate[f]=[]),r(null,n)})}_compress(e,t,r){if(!e||0===e.length)return void process.nextTick(r,null,l);const s=this._isServer?"server":"client";if(!this._deflate){const e=`${s}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=n.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[h]=0,this._deflate[f]=[],this._deflate.on("error",a),this._deflate.on("data",m)}this._deflate[d]=r,this._deflate.write(e),this._deflate.flush(n.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let e=o.concat(this._deflate[f],this._deflate[h]);t&&(e=e.slice(0,e.length-4)),this._deflate[d]=null,t&&this.params[`${s}_no_context_takeover`]?(this._deflate.close(),this._deflate=null):(this._deflate[h]=0,this._deflate[f]=[]),r(null,e)})}}},function(e,t){e.exports=require("crypto")},function(e,t){e.exports=require("path")},function(e,t,r){"use strict";let s;try{const{app:e}=r(41);s=e.setAsDefaultProtocolClient.bind(e)}catch(e){try{s=r(40)}catch(e){}}"function"!=typeof s&&(s=(()=>!1));e.exports={pid:function(){return"undefined"!=typeof process?process.pid:null},register:s,uuid:()=>{let e="";for(let t=0;t<32;t+=1){let r;if(8!==t&&12!==t&&16!==t&&20!==t||(e+="-"),12===t)r=4;else{const e=16*Math.random()|0;r=16===t?3&e|0:e}e+=r.toString(16)}return e}}},function(e,t){e.exports=require("https")},function(e,t,r){"use strict";const s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function n(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}e.exports={format:function(e){return Object.keys(e).map(t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>[t].concat(Object.keys(e).map(t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(e){const t=Object.create(null);if(void 0===e||""===e)return t;let r,o,i=Object.create(null),a=!1,c=!1,l=!1,u=-1,h=-1,d=0;for(;d<e.length;d++){const f=e.charCodeAt(d);if(void 0===r)if(-1===h&&1===s[f])-1===u&&(u=d);else if(32===f||9===f)-1===h&&-1!==u&&(h=d);else{if(59!==f&&44!==f)throw new SyntaxError(`Unexpected character at index ${d}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${d}`);-1===h&&(h=d);const s=e.slice(u,h);44===f?(n(t,s,i),i=Object.create(null)):r=s,u=h=-1}}else if(void 0===o)if(-1===h&&1===s[f])-1===u&&(u=d);else if(32===f||9===f)-1===h&&-1!==u&&(h=d);else if(59===f||44===f){if(-1===u)throw new SyntaxError(`Unexpected character at index ${d}`);-1===h&&(h=d),n(i,e.slice(u,h),!0),44===f&&(n(t,r,i),i=Object.create(null),r=void 0),u=h=-1}else{if(61!==f||-1===u||-1!==h)throw new SyntaxError(`Unexpected character at index ${d}`);o=e.slice(u,d),u=h=-1}else if(c){if(1!==s[f])throw new SyntaxError(`Unexpected character at index ${d}`);-1===u?u=d:a||(a=!0),c=!1}else if(l)if(1===s[f])-1===u&&(u=d);else if(34===f&&-1!==u)l=!1,h=d;else{if(92!==f)throw new SyntaxError(`Unexpected character at index ${d}`);c=!0}else if(34===f&&61===e.charCodeAt(d-1))l=!0;else if(-1===h&&1===s[f])-1===u&&(u=d);else if(-1===u||32!==f&&9!==f){if(59!==f&&44!==f)throw new SyntaxError(`Unexpected character at index ${d}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${d}`);-1===h&&(h=d);let s=e.slice(u,h);a&&(s=s.replace(/\\/g,""),a=!1),n(i,o,s),44===f&&(n(t,r,i),i=Object.create(null),r=void 0),o=void 0,u=h=-1}}else-1===h&&(h=d)}if(-1===u||l)throw new SyntaxError("Unexpected end of input");-1===h&&(h=d);const f=e.slice(u,h);return void 0===r?n(t,f,i):(void 0===o?n(i,f,!0):n(i,o,a?f.replace(/\\/g,""):f),n(t,r,i)),t}}},function(e,t,r){"use strict";const{randomFillSync:s}=r(8),n=r(7),{EMPTY_BUFFER:o}=r(2),{isValidStatusCode:i}=r(14),{mask:a,toBuffer:c}=r(6),l=Buffer.alloc(4);class u{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){const r=t.mask&&t.readOnly;let n=t.mask?6:2,o=e.length;e.length>=65536?(n+=8,o=127):e.length>125&&(n+=2,o=126);const i=Buffer.allocUnsafe(r?e.length+n:n);return i[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(i[0]|=64),i[1]=o,126===o?i.writeUInt16BE(e.length,2):127===o&&(i.writeUInt32BE(0,2),i.writeUInt32BE(e.length,6)),t.mask?(s(l,0,4),i[1]|=128,i[n-4]=l[0],i[n-3]=l[1],i[n-2]=l[2],i[n-1]=l[3],r?(a(e,l,i,n,e.length),[i]):(a(e,l,e,0,e.length),[i,e])):[i,e]}close(e,t,r,s){let n;if(void 0===e)n=o;else{if("number"!=typeof e||!i(e))throw new TypeError("First argument must be a valid error code number");void 0===t||""===t?(n=Buffer.allocUnsafe(2)).writeUInt16BE(e,0):((n=Buffer.allocUnsafe(2+Buffer.byteLength(t))).writeUInt16BE(e,0),n.write(t,2))}this._deflating?this.enqueue([this.doClose,n,r,s]):this.doClose(n,r,s)}doClose(e,t,r){this.sendFrame(u.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),r)}ping(e,t,r){const s=c(e);this._deflating?this.enqueue([this.doPing,s,t,c.readOnly,r]):this.doPing(s,t,c.readOnly,r)}doPing(e,t,r,s){this.sendFrame(u.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:r}),s)}pong(e,t,r){const s=c(e);this._deflating?this.enqueue([this.doPong,s,t,c.readOnly,r]):this.doPong(s,t,c.readOnly,r)}doPong(e,t,r,s){this.sendFrame(u.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:r}),s)}send(e,t,r){const s=c(e),o=this._extensions[n.extensionName];let i=t.binary?2:1,a=t.compress;if(this._firstFragment?(this._firstFragment=!1,a&&o&&(a=s.length>=o._threshold),this._compress=a):(a=!1,i=0),t.fin&&(this._firstFragment=!0),o){const e={fin:t.fin,rsv1:a,opcode:i,mask:t.mask,readOnly:c.readOnly};this._deflating?this.enqueue([this.dispatch,s,this._compress,e,r]):this.dispatch(s,this._compress,e,r)}else this.sendFrame(u.frame(s,{fin:t.fin,rsv1:!1,opcode:i,mask:t.mask,readOnly:c.readOnly}),r)}dispatch(e,t,r,s){if(!t)return void this.sendFrame(u.frame(e,r),s);const o=this._extensions[n.extensionName];this._deflating=!0,o.compress(e,r.fin,(e,t)=>{this._deflating=!1,r.readOnly=!1,this.sendFrame(u.frame(t,r),s),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}e.exports=u},function(e,t,r){"use strict";try{const e=r(26);t.isValidUTF8="object"==typeof e?e.Validation.isValidUTF8:e}catch(e){t.isValidUTF8=(()=>!0)}t.isValidStatusCode=(e=>e>=1e3&&e<=1013&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999)},function(e,t,r){"use strict";const{Writable:s}=r(0),n=r(7),{BINARY_TYPES:o,EMPTY_BUFFER:i,kStatusCode:a,kWebSocket:c}=r(2),{concat:l,toArrayBuffer:u,unmask:h}=r(6),{isValidStatusCode:d,isValidUTF8:f}=r(14),p=0,_=1,m=2,E=3,y=4,g=5;function b(e,t,r,s){const n=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(n,b),n[a]=s,n}e.exports=class extends s{constructor(e,t,r){super(),this._binaryType=e||o[0],this[c]=void 0,this._extensions=t||{},this._maxPayload=0|r,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=p,this._loop=!1}_write(e,t,r){if(8===this._opcode&&this._state==p)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0];e>=r.length?this._buffers.shift().copy(t,t.length-e):(r.copy(t,t.length-e,0,e),this._buffers[0]=r.slice(e)),e-=r.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do{switch(this._state){case p:t=this.getInfo();break;case _:t=this.getPayloadLength16();break;case m:t=this.getPayloadLength64();break;case E:this.getMask();break;case y:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,b(RangeError,"RSV2 and RSV3 must be clear",!0,1002);const t=64==(64&e[0]);if(t&&!this._extensions[n.extensionName])return this._loop=!1,b(RangeError,"RSV1 must be clear",!0,1002);if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,b(RangeError,"RSV1 must be clear",!0,1002);if(!this._fragmented)return this._loop=!1,b(RangeError,"invalid opcode 0",!0,1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,b(RangeError,`invalid opcode ${this._opcode}`,!0,1002);this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,b(RangeError,`invalid opcode ${this._opcode}`,!0,1002);if(!this._fin)return this._loop=!1,b(RangeError,"FIN must be set",!0,1002);if(t)return this._loop=!1,b(RangeError,"RSV1 must be clear",!0,1002);if(this._payloadLength>125)return this._loop=!1,b(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002)}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),126===this._payloadLength)this._state=_;else{if(127!==this._payloadLength)return this.haveLength();this._state=m}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,b(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009)):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,b(RangeError,"Max payload size exceeded",!1,1009);this._masked?this._state=E:this._state=y}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=y)}getData(e){let t=i;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&h(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=g,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[n.extensionName].decompress(e,this._fin,(e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(b(RangeError,"Max payload size exceeded",!1,1009));this._fragments.push(r)}const s=this.dataMessage();if(s)return t(s);this.startLoop(t)})}dataMessage(){if(this._fin){const e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let r;r="nodebuffer"===this._binaryType?l(t,e):"arraybuffer"===this._binaryType?u(l(t,e)):t,this.emit("message",r)}else{const r=l(t,e);if(!f(r))return this._loop=!1,b(Error,"invalid UTF-8 sequence",!0,1007);this.emit("message",r.toString())}}this._state=p}controlMessage(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,""),this.end();else{if(1===e.length)return b(RangeError,"invalid payload length 1",!0,1002);{const t=e.readUInt16BE(0);if(!d(t))return b(RangeError,`invalid status code ${t}`,!0,1002);const r=e.slice(2);if(!f(r))return b(Error,"invalid UTF-8 sequence",!0,1007);this.emit("conclude",t,r.toString()),this.end()}}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e);this._state=p}}},function(e,t,r){var s=r(21),n=r(9),o=r(28),i=require,a=process.versions.modules,c=process.versions&&process.versions.electron||process.env.ELECTRON_RUN_AS_NODE||"undefined"!=typeof window&&window.process&&"renderer"===window.process.type?"electron":"node",l=o.arch(),u=o.platform();function h(e){return i(h.path(e))}function d(e,t){try{var r=s.readdirSync(e).filter(t);return r[0]&&n.join(e,r[0])}catch(e){return null}}function f(e){return e===c+"-napi.node"}function p(e){return"node-napi.node"===e}function _(e){var t=e.split("-");return t[0]===c&&t[1]===a+".node"}function m(e){return/\.node$/.test(e)}e.exports=h,h.path=function(e){e=n.resolve(e||".");try{var t=i(n.join(e,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[t+"_PREBUILD"]&&(e=process.env[t+"_PREBUILD"])}catch(e){}var r=d(n.join(e,"build/Release"),m);if(r)return r;var s=d(n.join(e,"build/Debug"),m);if(s)return s;var o=d(n.join(e,"prebuilds/"+u+"-"+l),_);if(o)return o;var h=d(n.join(e,"prebuilds/"+u+"-"+l),f);if(h)return h;var E=d(n.join(e,"prebuilds/"+u+"-"+l),p);if(E)return E;throw new Error("No native build was found for runtime="+c+" abi="+a+" platform="+u+" arch="+l)}},function(e,t,r){"use strict";const s=r(3),n=r(11),o=r(4),i=r(19),a=r(31),{randomBytes:c,createHash:l}=r(8),{URL:u}=r(5),h=r(7),d=r(15),f=r(13),{BINARY_TYPES:p,EMPTY_BUFFER:_,GUID:m,kStatusCode:E,kWebSocket:y,NOOP:g}=r(2),{addEventListener:b,removeEventListener:T}=r(24),{format:S,parse:v}=r(12),{toBuffer:w}=r(6),I=["CONNECTING","OPEN","CLOSING","CLOSED"],C=[8,13],O=3e4;class N extends s{constructor(e,t,r){super(),this.readyState=N.CONNECTING,this.protocol="",this._binaryType=p[0],this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._closeCode=1006,this._extensions={},this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,Array.isArray(t)?t=t.join(", "):"object"==typeof t&&null!==t&&(r=t,t=void 0),function e(t,r,s,i){const a={protocolVersion:C[1],maxPayload:104857600,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...i,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,auth:void 0,host:void 0,path:void 0,port:void 0};if(!C.includes(a.protocolVersion))throw new RangeError(`Unsupported protocol version: ${a.protocolVersion} `+`(supported versions: ${C.join(", ")})`);let d;r instanceof u?(d=r,t.url=r.href):(d=new u(r),t.url=r);const f="ws+unix:"===d.protocol;if(!(d.host||f&&d.pathname))throw new Error(`Invalid URL: ${t.url}`);const p="wss:"===d.protocol||"https:"===d.protocol;const _=p?443:80;const E=c(16).toString("base64");const y=p?n.get:o.get;let g;a.createConnection=p?x:L;a.defaultPort=a.defaultPort||_;a.port=d.port||_;a.host=d.hostname.startsWith("[")?d.hostname.slice(1,-1):d.hostname;a.headers={"Sec-WebSocket-Version":a.protocolVersion,"Sec-WebSocket-Key":E,Connection:"Upgrade",Upgrade:"websocket",...a.headers};a.path=d.pathname+d.search;a.timeout=a.handshakeTimeout;a.perMessageDeflate&&(g=new h(!0!==a.perMessageDeflate?a.perMessageDeflate:{},!1,a.maxPayload),a.headers["Sec-WebSocket-Extensions"]=S({[h.extensionName]:g.offer()}));s&&(a.headers["Sec-WebSocket-Protocol"]=s);a.origin&&(a.protocolVersion<13?a.headers["Sec-WebSocket-Origin"]=a.origin:a.headers.Origin=a.origin);(d.username||d.password)&&(a.auth=`${d.username}:${d.password}`);if(f){const e=a.path.split(":");a.socketPath=e[0],a.path=e[1]}let b=t._req=y(a);a.timeout&&b.on("timeout",()=>{A(t,b,"Opening handshake has timed out")});b.on("error",e=>{t._req.aborted||(b=t._req=null,t.readyState=N.CLOSING,t.emit("error",e),t.emitClose())});b.on("response",n=>{const o=n.headers.location,c=n.statusCode;if(o&&a.followRedirects&&c>=300&&c<400){if(++t._redirects>a.maxRedirects)return void A(t,b,"Maximum redirects exceeded");b.abort();const n=new u(o,r);e(t,n,s,i)}else t.emit("unexpected-response",b,n)||A(t,b,`Unexpected server response: ${n.statusCode}`)});b.on("upgrade",(e,r,n)=>{if(t.emit("upgrade",e),t.readyState!==N.CONNECTING)return;b=t._req=null;const o=l("sha1").update(E+m).digest("base64");if(e.headers["sec-websocket-accept"]!==o)return void A(t,r,"Invalid Sec-WebSocket-Accept header");const i=e.headers["sec-websocket-protocol"],c=(s||"").split(/, */);let u;if(!s&&i?u="Server sent a subprotocol but none was requested":s&&!i?u="Server sent no subprotocol":i&&!c.includes(i)&&(u="Server sent an invalid subprotocol"),u)A(t,r,u);else{if(i&&(t.protocol=i),g)try{const s=v(e.headers["sec-websocket-extensions"]);s[h.extensionName]&&(g.accept(s[h.extensionName]),t._extensions[h.extensionName]=g)}catch(e){return void A(t,r,"Invalid Sec-WebSocket-Extensions header")}t.setSocket(r,n,a.maxPayload)}})}(this,e,t,r)):this._isServer=!0}get CONNECTING(){return N.CONNECTING}get CLOSING(){return N.CLOSING}get CLOSED(){return N.CLOSED}get OPEN(){return N.OPEN}get binaryType(){return this._binaryType}set binaryType(e){p.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?(this._socket.bufferSize||0)+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}setSocket(e,t,r){const s=new d(this._binaryType,this._extensions,r);this._sender=new f(e,this._extensions),this._receiver=s,this._socket=e,s[y]=this,e[y]=this,s.on("conclude",k),s.on("drain",P),s.on("error",B),s.on("message",D),s.on("ping",M),s.on("pong",G),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",V),e.on("data",j),e.on("end",$),e.on("error",q),this.readyState=N.OPEN,this.emit("open")}emitClose(){this.readyState=N.CLOSED,this._socket?(this._extensions[h.extensionName]&&this._extensions[h.extensionName].cleanup(),this._receiver.removeAllListeners(),this.emit("close",this._closeCode,this._closeMessage)):this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==N.CLOSED){if(this.readyState===N.CONNECTING){const e="WebSocket was closed before the connection was established";return A(this,this._req,e)}this.readyState!==N.CLOSING?(this.readyState=N.CLOSING,this._sender.close(e,t,!this._isServer,e=>{e||(this._closeFrameSent=!0,this._closeFrameReceived&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),O)):this._closeFrameSent&&this._closeFrameReceived&&this._socket.end()}}ping(e,t,r){if(this.readyState===N.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===N.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||_,t,r)):R(this,e,r)}pong(e,t,r){if(this.readyState===N.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===N.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||_,t,r)):R(this,e,r)}send(e,t,r){if(this.readyState===N.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==N.OPEN)return void R(this,e,r);const s={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[h.extensionName]||(s.compress=!1),this._sender.send(e||_,s,r)}terminate(){if(this.readyState!==N.CLOSED){if(this.readyState===N.CONNECTING){const e="WebSocket was closed before the connection was established";return A(this,this._req,e)}this._socket&&(this.readyState=N.CLOSING,this._socket.destroy())}}}function L(e){return e.path=e.socketPath,i.connect(e)}function x(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=e.host),a.connect(e)}function A(e,t,r){e.readyState=N.CLOSING;const s=new Error(r);Error.captureStackTrace(s,A),t.setHeader?(t.abort(),t.once("abort",e.emitClose.bind(e)),e.emit("error",s)):(t.destroy(s),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function R(e,t,r){if(t){const r=w(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}if(r){r(new Error(`WebSocket is not open: readyState ${e.readyState} `+`(${I[e.readyState]})`))}}function k(e,t){const r=this[y];r._socket.removeListener("data",j),r._socket.resume(),r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,1005===e?r.close():r.close(e,t)}function P(){this[y]._socket.resume()}function B(e){const t=this[y];t._socket.removeListener("data",j),t.readyState=N.CLOSING,t._closeCode=e[E],t.emit("error",e),t._socket.destroy()}function U(){this[y].emitClose()}function D(e){this[y].emit("message",e)}function M(e){const t=this[y];t.pong(e,!t._isServer,g),t.emit("ping",e)}function G(e){this[y].emit("pong",e)}function V(){const e=this[y];this.removeListener("close",V),this.removeListener("end",$),e.readyState=N.CLOSING,e._socket.read(),e._receiver.end(),this.removeListener("data",j),this[y]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",U),e._receiver.on("finish",U))}function j(e){this[y]._receiver.write(e)||this.pause()}function $(){const e=this[y];e.readyState=N.CLOSING,e._receiver.end(),this.end()}function q(){const e=this[y];this.removeListener("error",q),this.on("error",g),e&&(e.readyState=N.CLOSING,this.destroy())}I.forEach((e,t)=>{N[e]=t}),["open","error","close","message"].forEach(e=>{Object.defineProperty(N.prototype,`on${e}`,{get(){const t=this.listeners(e);for(let e=0;e<t.length;e++)if(t[e]._listener)return t[e]._listener},set(t){const r=this.listeners(e);for(let t=0;t<r.length;t++)r[t]._listener&&this.removeListener(e,r[t]);this.addEventListener(e,t)}})}),N.prototype.addEventListener=b,N.prototype.removeEventListener=T,e.exports=N},function(e,t,r){"use strict";function s(e){const t={};for(const r of e)t[r]=r;return t}t.browser="undefined"!=typeof window,t.RPCCommands=s(["DISPATCH","AUTHORIZE","AUTHENTICATE","GET_GUILD","GET_GUILDS","GET_CHANNEL","GET_CHANNELS","GET_RELATIONSHIPS","GET_USER","SUBSCRIBE","UNSUBSCRIBE","SET_USER_VOICE_SETTINGS","SET_USER_VOICE_SETTINGS_2","SELECT_VOICE_CHANNEL","GET_SELECTED_VOICE_CHANNEL","SELECT_TEXT_CHANNEL","GET_VOICE_SETTINGS","SET_VOICE_SETTINGS_2","SET_VOICE_SETTINGS","CAPTURE_SHORTCUT","SET_ACTIVITY","SEND_ACTIVITY_JOIN_INVITE","CLOSE_ACTIVITY_JOIN_REQUEST","ACTIVITY_INVITE_USER","ACCEPT_ACTIVITY_INVITE","INVITE_BROWSER","DEEP_LINK","CONNECTIONS_CALLBACK","BRAINTREE_POPUP_BRIDGE_CALLBACK","GIFT_CODE_BROWSER","OVERLAY","BROWSER_HANDOFF","SET_CERTIFIED_DEVICES","GET_IMAGE","CREATE_LOBBY","UPDATE_LOBBY","DELETE_LOBBY","UPDATE_LOBBY_MEMBER","CONNECT_TO_LOBBY","DISCONNECT_FROM_LOBBY","SEND_TO_LOBBY","SEARCH_LOBBIES","CONNECT_TO_LOBBY_VOICE","DISCONNECT_FROM_LOBBY_VOICE","SET_OVERLAY_LOCKED","OPEN_OVERLAY_ACTIVITY_INVITE","OPEN_OVERLAY_GUILD_INVITE","OPEN_OVERLAY_VOICE_SETTINGS","VALIDATE_APPLICATION","GET_ENTITLEMENT_TICKET","GET_APPLICATION_TICKET","START_PURCHASE","GET_SKUS","GET_ENTITLEMENTS","GET_NETWORKING_CONFIG","NETWORKING_SYSTEM_METRICS","NETWORKING_PEER_METRICS","NETWORKING_CREATE_TOKEN","SET_USER_ACHIEVEMENT","GET_USER_ACHIEVEMENTS"]),t.RPCEvents=s(["CURRENT_USER_UPDATE","GUILD_STATUS","GUILD_CREATE","CHANNEL_CREATE","RELATIONSHIP_UPDATE","VOICE_CHANNEL_SELECT","VOICE_STATE_CREATE","VOICE_STATE_DELETE","VOICE_STATE_UPDATE","VOICE_SETTINGS_UPDATE","VOICE_SETTINGS_UPDATE_2","VOICE_CONNECTION_STATUS","SPEAKING_START","SPEAKING_STOP","GAME_JOIN","GAME_SPECTATE","ACTIVITY_JOIN","ACTIVITY_JOIN_REQUEST","ACTIVITY_SPECTATE","ACTIVITY_INVITE","NOTIFICATION_CREATE","MESSAGE_CREATE","MESSAGE_UPDATE","MESSAGE_DELETE","LOBBY_DELETE","LOBBY_UPDATE","LOBBY_MEMBER_CONNECT","LOBBY_MEMBER_DISCONNECT","LOBBY_MEMBER_UPDATE","LOBBY_MESSAGE","CAPTURE_SHORTCUT_CHANGE","OVERLAY","OVERLAY_UPDATE","ENTITLEMENT_CREATE","ENTITLEMENT_DELETE","USER_ACHIEVEMENT_UPDATE","READY","ERROR"]),t.RPCErrors={CAPTURE_SHORTCUT_ALREADY_LISTENING:5004,GET_GUILD_TIMED_OUT:5002,INVALID_ACTIVITY_JOIN_REQUEST:4012,INVALID_ACTIVITY_SECRET:5005,INVALID_CHANNEL:4005,INVALID_CLIENTID:4007,INVALID_COMMAND:4002,INVALID_ENTITLEMENT:4015,INVALID_EVENT:4004,INVALID_GIFT_CODE:4016,INVALID_GUILD:4003,INVALID_INVITE:4011,INVALID_LOBBY:4013,INVALID_LOBBY_SECRET:4014,INVALID_ORIGIN:4008,INVALID_PAYLOAD:4e3,INVALID_PERMISSIONS:4006,INVALID_TOKEN:4009,INVALID_USER:4010,LOBBY_FULL:5007,NO_ELIGIBLE_ACTIVITY:5006,OAUTH2_ERROR:5e3,PURCHASE_CANCELED:5008,PURCHASE_ERROR:5009,RATE_LIMITED:5011,SELECT_CHANNEL_TIMED_OUT:5001,SELECT_VOICE_FORCE_REQUIRED:5003,SERVICE_UNAVAILABLE:1001,TRANSACTION_ABORTED:1002,UNAUTHORIZED_FOR_ACHIEVEMENT:5010,UNKNOWN_ERROR:1e3},t.RPCCloseCodes={CLOSE_NORMAL:1e3,CLOSE_UNSUPPORTED:1003,CLOSE_ABNORMAL:1006,INVALID_CLIENTID:4e3,INVALID_ORIGIN:4001,RATELIMITED:4002,TOKEN_REVOKED:4003,INVALID_VERSION:4004,INVALID_ENCODING:4005},t.LobbyTypes={PRIVATE:1,PUBLIC:2},t.RelationshipTypes={NONE:0,FRIEND:1,BLOCKED:2,PENDING_INCOMING:3,PENDING_OUTGOING:4,IMPLICIT:5}},function(e,t){e.exports=require("net")},function(e,t,r){"use strict";r.r(t),r.d(t,"Headers",function(){return L}),r.d(t,"Request",function(){return $}),r.d(t,"Response",function(){return U}),r.d(t,"FetchError",function(){return d});var s=r(0),n=r(4),o=r(5),i=r(11),a=r(1);const c=s.Readable,l=Symbol("buffer"),u=Symbol("type");class h{constructor(){this[u]="";const e=arguments[0],t=arguments[1],r=[];let s=0;if(e){const t=e,n=Number(t.length);for(let e=0;e<n;e++){const n=t[e];let o;s+=(o=n instanceof Buffer?n:ArrayBuffer.isView(n)?Buffer.from(n.buffer,n.byteOffset,n.byteLength):n instanceof ArrayBuffer?Buffer.from(n):n instanceof h?n[l]:Buffer.from("string"==typeof n?n:String(n))).length,r.push(o)}}this[l]=Buffer.concat(r);let n=t&&void 0!==t.type&&String(t.type).toLowerCase();n&&!/[^\u0020-\u007E]/.test(n)&&(this[u]=n)}get size(){return this[l].length}get type(){return this[u]}text(){return Promise.resolve(this[l].toString())}arrayBuffer(){const e=this[l],t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(t)}stream(){const e=new c;return e._read=function(){},e.push(this[l]),e.push(null),e}toString(){return"[object Blob]"}slice(){const e=this.size,t=arguments[0],r=arguments[1];let s,n;s=void 0===t?0:t<0?Math.max(e+t,0):Math.min(t,e),n=void 0===r?e:r<0?Math.max(e+r,0):Math.min(r,e);const o=Math.max(n-s,0),i=this[l].slice(s,s+o),a=new h([],{type:arguments[2]});return a[l]=i,a}}function d(e,t,r){Error.call(this,e),this.message=e,this.type=t,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}let f;Object.defineProperties(h.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(h.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.name="FetchError";try{f=require("encoding").convert}catch(e){}const p=Symbol("Body internals"),_=s.PassThrough;function m(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.size;let o=void 0===n?0:n;var i=r.timeout;let a=void 0===i?0:i;null==e?e=null:y(e)?e=Buffer.from(e.toString()):g(e)||Buffer.isBuffer(e)||("[object ArrayBuffer]"===Object.prototype.toString.call(e)?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof s||(e=Buffer.from(String(e)))),this[p]={body:e,disturbed:!1,error:null},this.size=o,this.timeout=a,e instanceof s&&e.on("error",function(e){const r="AbortError"===e.name?e:new d(`Invalid response body while trying to fetch ${t.url}: ${e.message}`,"system",e);t[p].error=r})}function E(){var e=this;if(this[p].disturbed)return m.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[p].disturbed=!0,this[p].error)return m.Promise.reject(this[p].error);let t=this.body;if(null===t)return m.Promise.resolve(Buffer.alloc(0));if(g(t)&&(t=t.stream()),Buffer.isBuffer(t))return m.Promise.resolve(t);if(!(t instanceof s))return m.Promise.resolve(Buffer.alloc(0));let r=[],n=0,o=!1;return new m.Promise(function(s,i){let a;e.timeout&&(a=setTimeout(function(){o=!0,i(new d(`Response timeout while trying to fetch ${e.url} (over ${e.timeout}ms)`,"body-timeout"))},e.timeout)),t.on("error",function(t){"AbortError"===t.name?(o=!0,i(t)):i(new d(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t))}),t.on("data",function(t){if(!o&&null!==t){if(e.size&&n+t.length>e.size)return o=!0,void i(new d(`content size at ${e.url} over limit: ${e.size}`,"max-size"));n+=t.length,r.push(t)}}),t.on("end",function(){if(!o){clearTimeout(a);try{s(Buffer.concat(r,n))}catch(t){i(new d(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t))}}})})}function y(e){return"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&("URLSearchParams"===e.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(e)||"function"==typeof e.sort)}function g(e){return"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&"string"==typeof e.constructor.name&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}function b(e){let t,r,n=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return n instanceof s&&"function"!=typeof n.getBoundary&&(t=new _,r=new _,n.pipe(t),n.pipe(r),e[p].body=t,n=r),n}function T(e){return null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":y(e)?"application/x-www-form-urlencoded;charset=UTF-8":g(e)?e.type||null:Buffer.isBuffer(e)?null:"[object ArrayBuffer]"===Object.prototype.toString.call(e)?null:ArrayBuffer.isView(e)?null:"function"==typeof e.getBoundary?`multipart/form-data;boundary=${e.getBoundary()}`:e instanceof s?null:"text/plain;charset=UTF-8"}function S(e){const t=e.body;return null===t?0:g(t)?t.size:Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&(t._lengthRetrievers&&0==t._lengthRetrievers.length||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}m.prototype={get body(){return this[p].body},get bodyUsed(){return this[p].disturbed},arrayBuffer(){return E.call(this).then(function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)})},blob(){let e=this.headers&&this.headers.get("content-type")||"";return E.call(this).then(function(t){return Object.assign(new h([],{type:e.toLowerCase()}),{[l]:t})})},json(){var e=this;return E.call(this).then(function(t){try{return JSON.parse(t.toString())}catch(t){return m.Promise.reject(new d(`invalid json response body at ${e.url} reason: ${t.message}`,"invalid-json"))}})},text(){return E.call(this).then(function(e){return e.toString()})},buffer(){return E.call(this)},textConverted(){var e=this;return E.call(this).then(function(t){return function(e,t){if("function"!=typeof f)throw new Error("The package `encoding` must be installed to use the textConverted() function");const r=t.get("content-type");let s,n,o="utf-8";r&&(s=/charset=([^;]*)/i.exec(r));n=e.slice(0,1024).toString(),!s&&n&&(s=/<meta.+?charset=(['"])(.+?)\1/i.exec(n));!s&&n&&(s=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(n))&&(s=/charset=(.*)/i.exec(s.pop()));!s&&n&&(s=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(n));s&&("gb2312"!==(o=s.pop())&&"gbk"!==o||(o="gb18030"));return f(e,"UTF-8",o).toString()}(t,e.headers)})}},Object.defineProperties(m.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),m.mixIn=function(e){for(const t of Object.getOwnPropertyNames(m.prototype))if(!(t in e)){const r=Object.getOwnPropertyDescriptor(m.prototype,t);Object.defineProperty(e,t,r)}},m.Promise=global.Promise;const v=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,w=/[^\t\x20-\x7e\x80-\xff]/;function I(e){if(e=`${e}`,v.test(e)||""===e)throw new TypeError(`${e} is not a legal HTTP header name`)}function C(e){if(e=`${e}`,w.test(e))throw new TypeError(`${e} is not a legal HTTP header value`)}function O(e,t){t=t.toLowerCase();for(const r in e)if(r.toLowerCase()===t)return r}const N=Symbol("map");class L{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[N]=Object.create(null),e instanceof L){const t=e.raw(),r=Object.keys(t);for(const e of r)for(const r of t[e])this.append(e,r)}else if(null==e);else{if("object"!=typeof e)throw new TypeError("Provided initializer must be an object");{const t=e[Symbol.iterator];if(null!=t){if("function"!=typeof t)throw new TypeError("Header pairs must be iterable");const r=[];for(const t of e){if("object"!=typeof t||"function"!=typeof t[Symbol.iterator])throw new TypeError("Each header pair must be iterable");r.push(Array.from(t))}for(const e of r){if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(e[0],e[1])}}else for(const t of Object.keys(e)){const r=e[t];this.append(t,r)}}}}get(e){I(e=`${e}`);const t=O(this[N],e);return void 0===t?null:this[N][t].join(", ")}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=x(this),s=0;for(;s<r.length;){var n=r[s];const o=n[0],i=n[1];e.call(t,i,o,this),r=x(this),s++}}set(e,t){t=`${t}`,I(e=`${e}`),C(t);const r=O(this[N],e);this[N][void 0!==r?r:e]=[t]}append(e,t){t=`${t}`,I(e=`${e}`),C(t);const r=O(this[N],e);void 0!==r?this[N][r].push(t):this[N][e]=[t]}has(e){return I(e=`${e}`),void 0!==O(this[N],e)}delete(e){I(e=`${e}`);const t=O(this[N],e);void 0!==t&&delete this[N][t]}raw(){return this[N]}keys(){return R(this,"key")}values(){return R(this,"value")}[Symbol.iterator](){return R(this,"key+value")}}function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";return Object.keys(e[N]).sort().map("key"===t?function(e){return e.toLowerCase()}:"value"===t?function(t){return e[N][t].join(", ")}:function(t){return[t.toLowerCase(),e[N][t].join(", ")]})}L.prototype.entries=L.prototype[Symbol.iterator],Object.defineProperty(L.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(L.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const A=Symbol("internal");function R(e,t){const r=Object.create(k);return r[A]={target:e,kind:t,index:0},r}const k=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==k)throw new TypeError("Value of `this` is not a HeadersIterator");var e=this[A];const t=e.target,r=e.kind,s=e.index,n=x(t,r);return s>=n.length?{value:void 0,done:!0}:(this[A].index=s+1,{value:n[s],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));Object.defineProperty(k,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});const P=Symbol("Response internals"),B=n.STATUS_CODES;class U{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m.call(this,e,t);const r=t.status||200,s=new L(t.headers);if(null!=e&&!s.has("Content-Type")){const t=T(e);t&&s.append("Content-Type",t)}this[P]={url:t.url,status:r,statusText:t.statusText||B[r],headers:s,counter:t.counter}}get url(){return this[P].url||""}get status(){return this[P].status}get ok(){return this[P].status>=200&&this[P].status<300}get redirected(){return this[P].counter>0}get statusText(){return this[P].statusText}get headers(){return this[P].headers}clone(){return new U(b(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}m.mixIn(U.prototype),Object.defineProperties(U.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(U.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const D=Symbol("Request internals"),M=o.parse,G=o.format,V="destroy"in s.Readable.prototype;function j(e){return"object"==typeof e&&"object"==typeof e[D]}class ${constructor(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};j(e)?t=M(e.url):(t=e&&e.href?M(e.href):M(`${e}`),e={});let s=r.method||e.method||"GET";if(s=s.toUpperCase(),(null!=r.body||j(e)&&null!==e.body)&&("GET"===s||"HEAD"===s))throw new TypeError("Request with GET/HEAD method cannot have body");let n=null!=r.body?r.body:j(e)&&null!==e.body?b(e):null;m.call(this,n,{timeout:r.timeout||e.timeout||0,size:r.size||e.size||0});const o=new L(r.headers||e.headers||{});if(null!=n&&!o.has("Content-Type")){const e=T(n);e&&o.append("Content-Type",e)}let i=j(e)?e.signal:null;if("signal"in r&&(i=r.signal),null!=i&&!function(e){const t=e&&"object"==typeof e&&Object.getPrototypeOf(e);return!(!t||"AbortSignal"!==t.constructor.name)}(i))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[D]={method:s,redirect:r.redirect||e.redirect||"follow",headers:o,parsedURL:t,signal:i},this.follow=void 0!==r.follow?r.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==r.compress?r.compress:void 0===e.compress||e.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent}get method(){return this[D].method}get url(){return G(this[D].parsedURL)}get headers(){return this[D].headers}get redirect(){return this[D].redirect}get signal(){return this[D].signal}clone(){return new $(this)}}function q(e){const t=e[D].parsedURL,r=new L(e[D].headers);if(r.has("Accept")||r.set("Accept","*/*"),!t.protocol||!t.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(t.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(e.signal&&e.body instanceof s.Readable&&!V)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let n=null;if(null==e.body&&/^(POST|PUT)$/i.test(e.method)&&(n="0"),null!=e.body){const t=S(e);"number"==typeof t&&(n=String(t))}n&&r.set("Content-Length",n),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),e.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");let o=e.agent;return"function"==typeof o&&(o=o(t)),r.has("Connection")||o||r.set("Connection","close"),Object.assign({},t,{method:e.method,headers:function(e){const t=Object.assign({__proto__:null},e[N]),r=O(e[N],"Host");return void 0!==r&&(t[r]=t[r][0]),t}(r),agent:o})}function F(e){Error.call(this,e),this.type="aborted",this.message=e,Error.captureStackTrace(this,this.constructor)}m.mixIn($.prototype),Object.defineProperty($.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties($.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}}),F.prototype=Object.create(Error.prototype),F.prototype.constructor=F,F.prototype.name="AbortError";const H=s.PassThrough,Y=o.resolve;function W(e,t){if(!W.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return m.Promise=W.Promise,new W.Promise(function(r,o){const c=new $(e,t),l=q(c),u=("https:"===l.protocol?i:n).request,h=c.signal;let f=null;const p=function(){let e=new F("The user aborted a request.");o(e),c.body&&c.body instanceof s.Readable&&c.body.destroy(e),f&&f.body&&f.body.emit("error",e)};if(h&&h.aborted)return void p();const _=function(){p(),y()},m=u(l);let E;function y(){m.abort(),h&&h.removeEventListener("abort",_),clearTimeout(E)}h&&h.addEventListener("abort",_),c.timeout&&m.once("socket",function(e){E=setTimeout(function(){o(new d(`network timeout at: ${c.url}`,"request-timeout")),y()},c.timeout)}),m.on("error",function(e){o(new d(`request to ${c.url} failed, reason: ${e.message}`,"system",e)),y()}),m.on("response",function(e){clearTimeout(E);const t=function(e){const t=new L;for(const r of Object.keys(e))if(!v.test(r))if(Array.isArray(e[r]))for(const s of e[r])w.test(s)||(void 0===t[N][r]?t[N][r]=[s]:t[N][r].push(s));else w.test(e[r])||(t[N][r]=[e[r]]);return t}(e.headers);if(W.isRedirect(e.statusCode)){const s=t.get("Location"),n=null===s?null:Y(c.url,s);switch(c.redirect){case"error":return o(new d(`redirect mode is set to error: ${c.url}`,"no-redirect")),void y();case"manual":if(null!==n)try{t.set("Location",n)}catch(e){o(e)}break;case"follow":if(null===n)break;if(c.counter>=c.follow)return o(new d(`maximum redirect reached at: ${c.url}`,"max-redirect")),void y();const s={headers:new L(c.headers),follow:c.follow,counter:c.counter+1,agent:c.agent,compress:c.compress,method:c.method,body:c.body,signal:c.signal,timeout:c.timeout};return 303!==e.statusCode&&c.body&&null===S(c)?(o(new d("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void y()):(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==c.method)||(s.method="GET",s.body=void 0,s.headers.delete("content-length")),r(W(new $(n,s))),void y())}}e.once("end",function(){h&&h.removeEventListener("abort",_)});let s=e.pipe(new H);const n={url:c.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:c.size,timeout:c.timeout,counter:c.counter},i=t.get("Content-Encoding");if(!c.compress||"HEAD"===c.method||null===i||204===e.statusCode||304===e.statusCode)return f=new U(s,n),void r(f);const l={flush:a.Z_SYNC_FLUSH,finishFlush:a.Z_SYNC_FLUSH};if("gzip"==i||"x-gzip"==i)return s=s.pipe(a.createGunzip(l)),f=new U(s,n),void r(f);if("deflate"!=i&&"x-deflate"!=i){if("br"==i&&"function"==typeof a.createBrotliDecompress)return s=s.pipe(a.createBrotliDecompress()),f=new U(s,n),void r(f);f=new U(s,n),r(f)}else{e.pipe(new H).once("data",function(e){s=8==(15&e[0])?s.pipe(a.createInflate()):s.pipe(a.createInflateRaw()),f=new U(s,n),r(f)})}}),function(e,t){const r=t.body;null===r?e.end():g(r)?r.stream().pipe(e):Buffer.isBuffer(r)?(e.write(r),e.end()):r.pipe(e)}(m,c)})}W.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},W.Promise=global.Promise,t.default=W},function(e,t){e.exports=require("fs")},function(e,t,r){"use strict";const s=r(3),{createHash:n}=r(8),{createServer:o,STATUS_CODES:i}=r(4),a=r(7),c=r(17),{format:l,parse:u}=r(12),{GUID:h}=r(2),d=/^[+/0-9A-Za-z]{22}==$/,f=Symbol("kUsedByWebSocketServer");function p(e){e.emit("close")}function _(){this.destroy()}function m(e,t,r,s){e.writable&&(r=r||i[t],s={Connection:"close","Content-type":"text/html","Content-Length":Buffer.byteLength(r),...s},e.write(`HTTP/1.1 ${t} ${i[t]}\r\n`+Object.keys(s).map(e=>`${e}: ${s[e]}`).join("\r\n")+"\r\n\r\n"+r)),e.removeListener("error",_),e.destroy()}e.exports=class extends s{constructor(e,t){if(super(),null==(e={maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...e}).port&&!e.server&&!e.noServer)throw new TypeError('One of the "port", "server", or "noServer" options must be specified');if(null!=e.port)this._server=o((e,t)=>{const r=i[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)}),this._server.listen(e.port,e.host,e.backlog,t);else if(e.server){if(e.server[f])throw new Error("The HTTP/S server is already being used by another WebSocket server");e.server[f]=!0,this._server=e.server}this._server&&(this._removeListeners=function(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function(){for(const r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(e,t,r)=>{this.handleUpgrade(e,t,r,t=>{this.emit("connection",t,e)})}})),!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(e&&this.once("close",e),this.clients)for(const e of this.clients)e.terminate();const t=this._server;if(t){if(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)return void t.close(()=>this.emit("close"));delete t[f]}process.nextTick(p,this)}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,s){t.on("error",_);const n=void 0!==e.headers["sec-websocket-key"]&&e.headers["sec-websocket-key"].trim(),o=+e.headers["sec-websocket-version"],i={};if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!n||!d.test(n)||8!==o&&13!==o||!this.shouldHandle(e))return m(t,400);if(this.options.perMessageDeflate){const r=new a(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const s=u(e.headers["sec-websocket-extensions"]);s[a.extensionName]&&(r.accept(s[a.extensionName]),i[a.extensionName]=r)}catch(e){return m(t,400)}}if(this.options.verifyClient){const a={origin:e.headers[`${8===o?"sec-websocket-origin":"origin"}`],secure:!(!e.connection.authorized&&!e.connection.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(a,(o,a,c,l)=>{if(!o)return m(t,a||401,c,l);this.completeUpgrade(n,i,e,t,r,s)});if(!this.options.verifyClient(a))return m(t,401)}this.completeUpgrade(n,i,e,t,r,s)}completeUpgrade(e,t,r,s,o,i){if(!s.readable||!s.writable)return s.destroy();const u=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${n("sha1").update(e+h).digest("base64")}`],d=new c(null);let f=r.headers["sec-websocket-protocol"];if(f&&(f=f.trim().split(/ *, */),(f=this.options.handleProtocols?this.options.handleProtocols(f,r):f[0])&&(u.push(`Sec-WebSocket-Protocol: ${f}`),d.protocol=f)),t[a.extensionName]){const e=t[a.extensionName].params,r=l({[a.extensionName]:[e]});u.push(`Sec-WebSocket-Extensions: ${r}`),d._extensions=t}this.emit("headers",u,r),s.write(u.concat("\r\n").join("\r\n")),s.removeListener("error",_),d.setSocket(s,o,this.options.maxPayload),this.clients&&(this.clients.add(d),d.on("close",()=>this.clients.delete(d))),i(d)}}},function(e,t,r){"use strict";const{Duplex:s}=r(0);function n(e){e.emit("close")}function o(){!this.destroyed&&this._writableState.finished&&this.destroy()}function i(e){this.removeListener("error",i),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let r=!0;function a(){r&&e._socket.resume()}e.readyState===e.CONNECTING?e.once("open",function(){e._receiver.removeAllListeners("drain"),e._receiver.on("drain",a)}):(e._receiver.removeAllListeners("drain"),e._receiver.on("drain",a));const c=new s({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,readableObjectMode:!1,writableObjectMode:!1});return e.on("message",function(t){c.push(t)||(r=!1,e._socket.pause())}),e.once("error",function(e){c.destroy(e)}),e.once("close",function(){c.destroyed||c.push(null)}),c._destroy=function(t,r){if(e.readyState===e.CLOSED)return r(t),void process.nextTick(n,c);e.once("close",function(){r(t),process.nextTick(n,c)}),e.terminate()},c._final=function(t){e.readyState!==e.CONNECTING?e._socket._writableState.finished?(c._readableState.endEmitted&&c.destroy(),t()):(e._socket.once("finish",function(){t()}),e.close()):e.once("open",function(){c._final(t)})},c._read=function(){e.readyState!==e.OPEN||r||(r=!0,e._receiver._writableState.needDrain||e._socket.resume())},c._write=function(t,r,s){e.readyState!==e.CONNECTING?e.send(t,s):e.once("open",function(){c._write(t,r,s)})},c.on("end",o),c.on("error",i),c}},function(e,t,r){"use strict";class s{constructor(e,t){this.target=t,this.type=e}}class n extends s{constructor(e,t){super("message",t),this.data=e}}class o extends s{constructor(e,t,r){super("close",r),this.wasClean=r._closeFrameReceived&&r._closeFrameSent,this.reason=t,this.code=e}}class i extends s{constructor(e){super("open",e)}}class a extends s{constructor(e,t){super("error",t),this.message=e.message,this.error=e}}const c={addEventListener(e,t){function r(e){t.call(this,new n(e,this))}function s(e,r){t.call(this,new o(e,r,this))}function c(e){t.call(this,new a(e,this))}function l(){t.call(this,new i(this))}"function"==typeof t&&("message"===e?(r._listener=t,this.on(e,r)):"close"===e?(s._listener=t,this.on(e,s)):"error"===e?(c._listener=t,this.on(e,c)):"open"===e?(l._listener=t,this.on(e,l)):this.on(e,t))},removeEventListener(e,t){const r=this.listeners(e);for(let s=0;s<r.length;s++)r[s]!==t&&r[s]._listener!==t||this.removeListener(e,r[s])}};e.exports=c},function(e,t,r){"use strict";e.exports=(e=>{for(var t=e.length,r=0;r<t;)if(e[r]<128)r++;else if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}return!0})},function(e,t,r){"use strict";(function(t){try{e.exports=r(16)(t)}catch(t){e.exports=r(25)}}).call(this,"/")},function(e,t,r){"use strict";e.exports={mask:(e,t,r,s,n)=>{for(var o=0;o<n;o++)r[s+o]=e[o]^t[3&o]},unmask:(e,t)=>{const r=e.length;for(var s=0;s<r;s++)e[s]^=t[3&s]}}},function(e,t){e.exports=require("os")},function(e,t,r){"use strict";(function(t){try{e.exports=r(16)(t)}catch(t){e.exports=r(27)}}).call(this,"/")},function(e,t,r){"use strict";function s(e){if(!(this instanceof s))return new s(e);e=e||{},this.concurrency=e.concurrency||1/0,this.pending=0,this.jobs=[],this.cbs=[],this._done=function(){this.pending--,this._run()}.bind(this)}["push","unshift","splice"].forEach(function(e){s.prototype[e]=function(){var t=Array.prototype[e].apply(this.jobs,arguments);return this._run(),t}}),Object.defineProperty(s.prototype,"length",{get:function(){return this.pending+this.jobs.length}}),s.prototype._run=function(){if(this.pending!==this.concurrency){if(this.jobs.length){var e=this.jobs.shift();this.pending++,e(this._done),this._run()}if(0===this.pending)for(;0!==this.cbs.length;){var t=this.cbs.pop();process.nextTick(t)}}},s.prototype.onDone=function(e){"function"==typeof e&&(this.cbs.push(e),this._run())},e.exports=s},function(e,t){e.exports=require("tls")},function(e,t,r){"use strict";const s=r(17);s.createWebSocketStream=r(23),s.Server=r(22),s.Receiver=r(15),s.Sender=r(13),e.exports=s},function(e,t,r){"use strict";const s=r(3),{browser:n}=r(18),o=n?window.WebSocket:r(32),i=e=>JSON.stringify(e),a=e=>JSON.parse(e);e.exports=class extends s{constructor(e){super(),this.client=e,this.ws=null,this.tries=0}async connect(e,t=this.tries){if(this.connected)return;const r=6463+t%10;this.hostAndPort=`127.0.0.1:${r}`;const s=this.ws=new o(`ws://${this.hostAndPort}/?v=1&client_id=${this.client.clientId}`);s.onopen=this.onOpen.bind(this),s.onclose=s.onerror=this.onClose.bind(this),s.onmessage=this.onMessage.bind(this)}send(e){this.ws&&this.ws.send(i(e))}close(){this.ws&&this.ws.close()}ping(){}onMessage(e){this.emit("message",a(e.data))}onOpen(){this.emit("open")}onClose(e){try{this.ws.close()}catch(e){}const t=e.code>=4e3&&e.code<5e3;e.code&&!t||this.emit("close",e),t||setTimeout(()=>this.connect(void 0,1006===e.code?++this.tries:0),250)}}},function(e,t,r){"use strict";const s=r(19),n=r(3),o=r(20),{uuid:i}=r(10),a={HANDSHAKE:0,FRAME:1,CLOSE:2,PING:3,PONG:4};function c(e=0){return new Promise((t,r)=>{const n=function(e){if("win32"===process.platform)return`\\\\?\\pipe\\discord-ipc-${e}`;const{env:{XDG_RUNTIME_DIR:t,TMPDIR:r,TMP:s,TEMP:n}}=process;return`${(t||r||s||n||"/tmp").replace(/\/$/,"")}/discord-ipc-${e}`}(e),o=()=>{e<10?t(c(e+1)):r(new Error("Could not connect"))},i=s.createConnection(n,()=>{i.removeListener("error",o),t(i)});i.once("error",o)})}function l(e,t){t=JSON.stringify(t);const r=Buffer.byteLength(t),s=Buffer.alloc(8+r);return s.writeInt32LE(e,0),s.writeInt32LE(r,4),s.write(t,8,r),s}const u={full:"",op:void 0};function h(e,t){const r=e.read();if(!r)return;let s,{op:n}=u;if(""===u.full){n=u.op=r.readInt32LE(0);const e=r.readInt32LE(4);s=r.slice(8,e+8)}else s=r.toString();try{t({op:n,data:JSON.parse(u.full+s)}),u.full="",u.op=void 0}catch(e){u.full+=s}h(e,t)}e.exports=class extends n{constructor(e){super(),this.client=e,this.socket=null}async connect(){const e=this.socket=await c();e.on("close",this.onClose.bind(this)),e.on("error",this.onClose.bind(this)),this.emit("open"),e.write(l(a.HANDSHAKE,{v:1,client_id:this.client.clientId})),e.pause(),e.on("readable",()=>{h(e,({op:e,data:t})=>{switch(e){case a.PING:this.send(t,a.PONG);break;case a.FRAME:if(!t)return;"AUTHORIZE"===t.cmd&&"ERROR"!==t.evt&&async function e(t=0){if(t>30)throw new Error("Could not find endpoint");const r=`http://127.0.0.1:${6463+t%10}`;try{return 401!==(await o(r)).status?e(t+1):r}catch(r){return e(t+1)}}().then(e=>{this.client.request.endpoint=e}),this.emit("message",t);break;case a.CLOSE:this.emit("close",t)}})})}onClose(e){this.emit("close",e)}send(e,t=a.FRAME){this.socket.write(l(t,e))}close(){this.send({},a.CLOSE),this.socket.end()}ping(){this.send(i(),a.PING)}},e.exports.encode=l,e.exports.decode=h},function(e,t,r){"use strict";e.exports={ipc:r(34),websocket:r(33)}},function(e,t){e.exports=require("timers")},function(e,t,r){"use strict";const s=r(3),{setTimeout:n,clearTimeout:o}=r(36),i=r(20),a=r(35),{RPCCommands:c,RPCEvents:l,RelationshipTypes:u}=r(18),{pid:h,uuid:d}=r(10);function f(e,t){return`${e}${JSON.stringify(t)}`}e.exports=class extends s{constructor(e={}){super(),this.options=e,this.accessToken=null,this.clientId=null,this.application=null,this.user=null;const t=a[e.transport];if(!t)throw new TypeError("RPC_INVALID_TRANSPORT",e.transport);this.fetch=((e,t,{data:r,query:s}={})=>i(`${this.fetch.endpoint}${t}${s?new URLSearchParams(s):""}`,{method:e,body:r,headers:{Authorization:`Bearer ${this.accessToken}`}}).then(e=>e.json())),this.fetch.endpoint="https://discordapp.com/api",this.transport=new t(this),this.transport.on("message",this._onRpcMessage.bind(this)),this._expecting=new Map,this._subscriptions=new Map,this._connectPromise=void 0}connect(e){return this._connectPromise?this._connectPromise:(this._connectPromise=new Promise((t,r)=>{this.clientId=e;const s=n(()=>r(new Error("RPC_CONNECTION_TIMEOUT")),1e4);s.unref(),this.once("connected",()=>{o(s),t(this)}),this.transport.once("close",()=>{this._expecting.forEach(e=>{e.reject(new Error("connection closed"))}),this.emit("disconnected"),r()}),this.transport.connect().catch(r)}),this._connectPromise)}async login(e={}){let{clientId:t,accessToken:r}=e;return await this.connect(t),e.scopes?(r||(r=await this.authorize(e)),this.authenticate(r)):(this.emit("ready"),this)}request(e,t,r){return new Promise((s,n)=>{const o=d();this.transport.send({cmd:e,args:t,evt:r,nonce:o}),this._expecting.set(o,{resolve:s,reject:n})})}_onRpcMessage(e){if(e.cmd===c.DISPATCH&&e.evt===l.READY)e.data.user&&(this.user=e.data.user),this.emit("connected");else if(this._expecting.has(e.nonce)){const{resolve:t,reject:r}=this._expecting.get(e.nonce);if("ERROR"===e.evt){const t=new Error(e.data.message);t.code=e.data.code,t.data=e.data,r(t)}else t(e.data);this._expecting.delete(e.nonce)}else{const t=f(e.evt,e.args);if(!this._subscriptions.has(t))return;this._subscriptions.get(t)(e.data)}}async authorize({scopes:e,clientSecret:t,rpcToken:r,redirectUri:s}={}){t&&!0===r&&(r=(await this.fetch("POST","/oauth2/token/rpc",{data:new URLSearchParams({client_id:this.clientId,client_secret:t})})).rpc_token);const{code:n}=await this.request("AUTHORIZE",{scopes:e,client_id:this.clientId,rpc_token:r,redirect_uri:s});return(await this.fetch("POST","/oauth2/token",{data:new URLSearchParams({client_id:this.clientId,client_secret:t,code:n,grant_type:"authorization_code",redirect_uri:s})})).access_token}authenticate(e){return this.request("AUTHENTICATE",{access_token:e}).then(({application:t,user:r})=>(this.accessToken=e,this.application=t,this.user=r,this.emit("ready"),this))}getGuild(e,t){return this.request(c.GET_GUILD,{guild_id:e,timeout:t})}getGuilds(e){return this.request(c.GET_GUILDS,{timeout:e})}getChannel(e,t){return this.request(c.GET_CHANNEL,{channel_id:e,timeout:t})}async getChannels(e,t){const{channels:r}=await this.request(c.GET_CHANNELS,{timeout:t,guild_id:e});return r}setCertifiedDevices(e){return this.request(c.SET_CERTIFIED_DEVICES,{devices:e.map(e=>({type:e.type,id:e.uuid,vendor:e.vendor,model:e.model,related:e.related,echo_cancellation:e.echoCancellation,noise_suppression:e.noiseSuppression,automatic_gain_control:e.automaticGainControl,hardware_mute:e.hardwareMute}))})}setUserVoiceSettings(e,t){return this.request(c.SET_USER_VOICE_SETTINGS,{user_id:e,pan:t.pan,mute:t.mute,volume:t.volume})}selectVoiceChannel(e,{timeout:t,force:r=!1}={}){return this.request(c.SELECT_VOICE_CHANNEL,{channel_id:e,timeout:t,force:r})}selectTextChannel(e,{timeout:t,force:r=!1}={}){return this.request(c.SELECT_TEXT_CHANNEL,{channel_id:e,timeout:t,force:r})}getVoiceSettings(){return this.request(c.GET_VOICE_SETTINGS).then(e=>({automaticGainControl:e.automatic_gain_control,echoCancellation:e.echo_cancellation,noiseSuppression:e.noise_suppression,qos:e.qos,silenceWarning:e.silence_warning,deaf:e.deaf,mute:e.mute,input:{availableDevices:e.input.available_devices,device:e.input.device_id,volume:e.input.volume},output:{availableDevices:e.output.available_devices,device:e.output.device_id,volume:e.output.volume},mode:{type:e.mode.type,autoThreshold:e.mode.auto_threshold,threshold:e.mode.threshold,shortcut:e.mode.shortcut,delay:e.mode.delay}}))}setVoiceSettings(e){return this.request(c.SET_VOICE_SETTINGS,{automatic_gain_control:e.automaticGainControl,echo_cancellation:e.echoCancellation,noise_suppression:e.noiseSuppression,qos:e.qos,silence_warning:e.silenceWarning,deaf:e.deaf,mute:e.mute,input:e.input?{device_id:e.input.device,volume:e.input.volume}:void 0,output:e.output?{device_id:e.output.device,volume:e.output.volume}:void 0,mode:e.mode?{mode:e.mode.type,auto_threshold:e.mode.autoThreshold,threshold:e.mode.threshold,shortcut:e.mode.shortcut,delay:e.mode.delay}:void 0})}captureShortcut(e){const t=f(l.CAPTURE_SHORTCUT_CHANGE),r=()=>(this._subscriptions.delete(t),this.request(c.CAPTURE_SHORTCUT,{action:"STOP"}));return this._subscriptions.set(t,({shortcut:t})=>{e(t,r)}),this.request(c.CAPTURE_SHORTCUT,{action:"START"}).then(()=>r)}setActivity(e={},t=h()){let r,s,n,o;if(e.startTimestamp||e.endTimestamp){if((r={start:e.startTimestamp,end:e.endTimestamp}).start instanceof Date&&(r.start=Math.round(r.start.getTime())),r.end instanceof Date&&(r.end=Math.round(r.end.getTime())),r.start>2147483647e3)throw new RangeError("timestamps.start must fit into a unix timestamp");if(r.end>2147483647e3)throw new RangeError("timestamps.end must fit into a unix timestamp")}return(e.largeImageKey||e.largeImageText||e.smallImageKey||e.smallImageText)&&(s={large_image:e.largeImageKey,large_text:e.largeImageText,small_image:e.smallImageKey,small_text:e.smallImageText}),(e.partySize||e.partyId||e.partyMax)&&(n={id:e.partyId},(e.partySize||e.partyMax)&&(n.size=[e.partySize,e.partyMax])),(e.matchSecret||e.joinSecret||e.spectateSecret)&&(o={match:e.matchSecret,join:e.joinSecret,spectate:e.spectateSecret}),this.request(c.SET_ACTIVITY,{pid:t,activity:{state:e.state,details:e.details,timestamps:r,assets:s,party:n,secrets:o,instance:!!e.instance}})}clearActivity(e=h()){return this.request(c.SET_ACTIVITY,{pid:e})}sendJoinInvite(e){return this.request(c.SEND_ACTIVITY_JOIN_INVITE,{user_id:e.id||e})}sendJoinRequest(e){return this.request(c.SEND_ACTIVITY_JOIN_REQUEST,{user_id:e.id||e})}closeJoinRequest(e){return this.request(c.CLOSE_ACTIVITY_JOIN_REQUEST,{user_id:e.id||e})}createLobby(e,t,r){return this.request(c.CREATE_LOBBY,{type:e,capacity:t,metadata:r})}updateLobby(e,{type:t,owner:r,capacity:s,metadata:n}={}){return this.request(c.UPDATE_LOBBY,{id:e.id||e,type:t,owner_id:r&&r.id||r,capacity:s,metadata:n})}deleteLobby(e){return this.request(c.DELETE_LOBBY,{id:e.id||e})}connectToLobby(e,t){return this.request(c.CONNECT_TO_LOBBY,{id:e,secret:t})}sendToLobby(e,t){return this.request(c.SEND_TO_LOBBY,{id:e.id||e,data:t})}disconnectFromLobby(e){return this.request(c.DISCONNECT_FROM_LOBBY,{id:e.id||e})}updateLobbyMember(e,t,r){return this.request(c.UPDATE_LOBBY_MEMBER,{lobby_id:e.id||e,user_id:t.id||t,metadata:r})}getRelationships(){const e=Object.keys(u);return this.request(c.GET_RELATIONSHIPS).then(t=>t.relationships.map(t=>({...t,type:e[t.type]})))}subscribe(e,t,r){return r||"function"!=typeof t||(r=t,t=void 0),this.request(c.SUBSCRIBE,t,e).then(()=>{const s=f(e,t);return this._subscriptions.set(s,r),{unsubscribe:()=>this.request(c.UNSUBSCRIBE,t,e).then(()=>this._subscriptions.delete(s))}})}async destroy(){this.transport.close()}}},function(e,t,r){var s=r(9).sep||"/";e.exports=function(e){if("string"!=typeof e||e.length<=7||"file://"!=e.substring(0,7))throw new TypeError("must pass in a file:// URI to convert to a file path");var t=decodeURI(e.substring(7)),r=t.indexOf("/"),n=t.substring(0,r),o=t.substring(r+1);"localhost"==n&&(n="");n&&(n=s+s+n);o=o.replace(/^(.+)\|/,"$1:"),"\\"==s&&(o=o.replace(/\//g,"\\"));/^.+\:/.test(o)||(o=s+o);return n+o}},function(e,t,r){(function(s){var n=r(21),o=r(9),i=r(38),a=o.join,c=o.dirname,l=n.accessSync&&function(e){try{n.accessSync(e)}catch(e){return!1}return!0}||n.existsSync||o.existsSync,u={arrow:process.env.NODE_BINDINGS_ARROW||"  ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","addon-build","release","install-root","bindings"],["module_root","addon-build","debug","install-root","bindings"],["module_root","addon-build","default","install-root","bindings"],["module_root","lib","binding","nodePreGyp","bindings"]]};e.exports=t=function(e){"string"==typeof e?e={bindings:e}:e||(e={}),Object.keys(u).map(function(t){t in e||(e[t]=u[t])}),e.module_root||(e.module_root=t.getRoot(t.getFileName())),".node"!=o.extname(e.bindings)&&(e.bindings+=".node");for(var r,s,n,i=require,c=[],l=0,h=e.try.length;l<h;l++){r=a.apply(null,e.try[l].map(function(t){return e[t]||t})),c.push(r);try{return s=e.path?i.resolve(r):i(r),e.path||(s.path=r),s}catch(e){if("MODULE_NOT_FOUND"!==e.code&&"QUALIFIED_PATH_RESOLUTION_FAILED"!==e.code&&!/not find/i.test(e.message))throw e}}throw(n=new Error("Could not locate the bindings file. Tried:\n"+c.map(function(t){return e.arrow+t}).join("\n"))).tries=c,n},t.getFileName=function(e){var t,r=Error.prepareStackTrace,n=Error.stackTraceLimit,o={};Error.stackTraceLimit=10,Error.prepareStackTrace=function(r,n){for(var o=0,i=n.length;o<i;o++)if((t=n[o].getFileName())!==s){if(!e)return;if(t!==e)return}},Error.captureStackTrace(o),Error.prepareStackTrace=r,Error.stackTraceLimit=n;return 0===t.indexOf("file://")&&(t=i(t)),t},t.getRoot=function(e){for(var t,r=c(e);;){if("."===r&&(r=process.cwd()),l(a(r,"package.json"))||l(a(r,"node_modules")))return r;if(t===r)throw new Error('Could not find module root given file: "'+e+'". Do you have a `package.json` file? ');t=r,r=a(r,"..")}}}).call(this,"/index.js")},function(e,t,r){e.exports=r(39)("register-protocol-handler").registerProtocolHandler},function(e,t){if("undefined"==typeof electron){var r=new Error('Cannot find module "electron"');throw r.code="MODULE_NOT_FOUND",r}e.exports=electron},function(e,t,r){"use strict";const s=r(10);e.exports={Client:r(37),register:e=>s.register(`discord-${e}`)}},function(e,t,r){const s=new(r(42).Client)({transport:"ipc"}),n=new Date;async function o(){s&&s.setActivity({largeImageKey:"blockbench",largeImageText:"Blockbench",details:"Working on blockmodel",state:`"${Project.name}"`,startTimestamp:n,instance:!1})}s.on("ready",()=>{o(),intervalID=setInterval(()=>{o()},15e3)}),s.login({clientId:"398111176145502209"}).catch(console.error)}]);